import{r as s,b as T,y as Q,j as d}from"./app-BUo6fmq2.js";import{Q as S}from"./richeditor-BAFtkwEc.js";import{u as j}from"./helper-CZSuvrJa.js";import{S as m}from"./sweetalert2.all-Bad43FOe.js";const k=({question:a,questions:l,setQuestions:h})=>{const[i,g]=s.useState(null),[y,x]=s.useState(null),[p,w]=s.useState(""),u=j(p,1e3);s.useEffect(()=>{u&&E(u,a.slug)},[u]);const E=(r,e)=>{const o={question_slug:e,answer:r,score:0};T.post(route("save_answer_essay",{slug:a.paket_soal_slug}),o).then(t=>{if(l){const n=l.find(c=>c.slug==e),R=l.findIndex(c=>c.slug==e);n&&(n.answer=t.data.answer);const f=l;f[R]=n,h(f)}}).catch(t=>{if(t.response.status==403){m.fire({title:"Ditutup",text:"Ujian Telah ditutup",icon:"error",confirmButtonText:"Keluar"}).then(n=>{Q.get(route("finished-exam",{slug:a.paket_soal_slug}))});return}m.fire({title:"ERROR",text:"Something Went Wrong!",icon:"error"}),console.log(t)})},b=s.useCallback(r=>{var t,n;if(r==null)return;r.innerHTML="";const e=document.createElement("div");e.innerHTML="",(t=a.answer)!=null&&t.answer&&(e.innerHTML=(n=a.answer)==null?void 0:n.answer),r.append(e);const o=new S(e,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{size:["small",!1,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"]]}});g(o),x(e)},[]);return s.useEffect(()=>{i!=null&&i.on("text-change",(r,e,o)=>{o=="user"&&w(i.root.innerHTML)})},[i]),d.jsx(d.Fragment,{children:d.jsx("div",{id:"editor",ref:b})})},_=k;export{_ as default};
