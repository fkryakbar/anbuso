import{r as y,j as e,D as _,Y as $,y as v,b as S}from"./app-DCYrID-D.js";import{L}from"./index.es-CHwTl57G.js";/* empty css                  */import{S as j}from"./sweetalert2.all-DxUAMuwL.js";import E from"./RichEditor-DaeK1JJ9.js";import"./richeditor-eMRK52yd.js";import"./helper-TBU9DuW1.js";function Q({children:a,paketSoal:d,nextQuestion:t,prevQuestion:c,questionIndex:o,questionTotal:m,student:i,changeQuestion:n,questions:x}){const[f,h]=y.useState(!1);return e.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[e.jsxs("nav",{className:"bg-white p-3 px-5 flex items-center shadow-md",children:[e.jsx("div",{className:"flex items-center gap-2 mr-2",children:e.jsx("button",{className:"lg:hidden",onClick:b=>h(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})})}),e.jsxs("div",{className:"flex items-center basis-[100%]",children:[e.jsxs("div",{className:"basis-[15%] hidden lg:block",children:[e.jsx("h1",{className:"text-blue-400 text-2xl font-bold ",children:"CBT"}),e.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Computer Based Test"})]}),e.jsx("div",{className:"basis-[85%] flex lg:justify-center justify-end items-center",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx("p",{className:"text-xs",children:"Nomor Soal"}),e.jsx("h1",{className:"font-bold text-sm",children:o+1})]})})]})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:`bg-white min-h-screen shadow-md fixed top-0 ${f?"left-0":"left-[-250px]"} w-[250px] pt-5 transition-all lg:hidden z-20`,children:[e.jsxs("div",{className:"flex ml-5 items-center justify-between mr-5 mb-5",children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-blue-400 text-2xl font-bold ",children:"CBT"}),e.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Computer Based Test"})]}),e.jsx("button",{onClick:b=>h(!1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),e.jsx(C,{student:i,paketSoal:d,questionTotal:m,changeQuestion:n,questionIndex:o,questions:x})]}),e.jsx("aside",{className:"lg:basis-[15%] bg-white min-h-screen shadow-md pt-5 hidden lg:block",children:e.jsx(C,{student:i,paketSoal:d,questionTotal:m,changeQuestion:n,questionIndex:o,questions:x})}),e.jsx("div",{onClick:b=>h(!1),className:`fixed inset-0 z-10 items-end bg-black bg-opacity-50 sm:items-center sm:justify-center ${f?"flex":"hidden"} min-h-screen`}),e.jsxs("div",{className:"lg:basis-[85%] w-full relative",children:[e.jsx("main",{className:"p-5",children:a}),e.jsxs("div",{className:"flex gap-2 fixed bottom-0 w-full bg-white p-3 lg:justify-start justify-center",children:[e.jsxs("button",{type:"button",onClick:c,className:"btn bg-blue-400 hover:bg-blue-800 text-white text-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"})}),"Sebelumnya"]}),e.jsxs("button",{type:"button",onClick:t,className:"btn bg-blue-400 hover:bg-blue-800 text-white text-sm",children:["Selanjutnya",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"})})]})]})]})]})]})}function C({changeQuestion:a,student:d,paketSoal:t,questionTotal:c,questionIndex:o,questions:m}){const i=[];if(c&&m)for(let n=0;n<c;n++)i.push(e.jsx("button",{onClick:x=>a(n),type:"button",className:`p-2 rounded border-[1px] hover:bg-amber-500 hover:text-white font-semibold text-gray-600 transition-all ${o==n?"bg-amber-500 text-white":""} ${m[n].answer?"bg-blue-500 text-white":""}`,children:n+1},n));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"ml-5 mb-5 mr-5",children:[e.jsxs("div",{className:"border-gray-300 border-[1px] p-2 rounded-lg text-center",children:[e.jsx("h1",{className:"font-bold text-gray-600",children:d.name}),e.jsxs("h1",{className:"text-gray-600 text-xs",children:["Kelas ",d.grade]})]}),e.jsxs("div",{className:"border-gray-300 border-[1px] p-2 rounded-lg text-center mt-5",children:[e.jsx("h1",{className:"font-bold text-gray-600",children:t.title}),e.jsx("hr",{className:"my-2"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:i})]})]})})}function D({paketSoal:a,student:d}){const[t,c]=y.useState(a.questions),o=t==null?void 0:t.length,[m,i]=_({questionIndex:0}),[n,x]=y.useState(m.questionIndex),f=()=>{x(s=>{if(s+1==o)return(t==null?void 0:t.filter(u=>u.answer==null)).length>0?(j.fire({title:"Belum Selesai",text:"Masih ada soal yang belum terjawab.",icon:"warning"}),s):(j.fire({title:"Yakin Sudah Selesai?",text:"Setelah selesai jawaban tidak bisa dirubah",icon:"success",showCancelButton:!0,confirmButtonText:"Selesai",cancelButtonText:"Batal"}).then(u=>{u.isConfirmed&&v.get(route("finished-exam",{slug:a.slug}))}),s);const l=s+1;return i({questionIndex:l}),l})},h=()=>{x(s=>{if(s==0)return s;const l=s-1;return i({questionIndex:l}),l})},b=s=>{x(s),i({questionIndex:s})},g=(s,l,r)=>{const u={question_slug:r,answer:s,score:0};s==l&&(u.score=1),S.post(route("save_answer_multiple_choice",{slug:a.slug}),u).then(p=>{if(t){const w=t.find(N=>N.slug==r),B=t.findIndex(N=>N.slug==r);w&&(w.answer=p.data.answer);const k=t;k[B]=w,c(k)}}).catch(p=>{if(p.response.status==403){j.fire({title:"Ditutup",text:"Ujian Telah ditutup",icon:"error",confirmButtonText:"Keluar"}).then(w=>{v.get(route("finished-exam",{slug:a.slug}))});return}j.fire({title:"ERROR",text:"Something Went Wrong!",icon:"error"}),console.log(p)})};return e.jsxs(Q,{changeQuestion:b,paketSoal:a,questions:t,nextQuestion:f,prevQuestion:h,questionIndex:n,questionTotal:o,student:d.session,children:[e.jsx($,{title:`${a.title} | Exam Mode`}),t&&t.length>0?t.map((s,l)=>e.jsxs("div",{className:`mb-[100px] max-w-[500px] mx-auto ${n==l?"":"hidden"}`,children:[e.jsx("div",{className:"mt-5",children:e.jsx(L,{children:s.content})}),e.jsx("div",{className:"mt-5",children:s.type=="multiple_choice"?e.jsxs(e.Fragment,{children:[s.format.option_a?e.jsxs("div",{className:"flex mb-4",children:[e.jsx("input",{onChange:r=>{g("a",s.format.answer_key,s.slug),r.target.checked},defaultChecked:s.answer?s.answer.answer=="a":!1,type:"radio",name:s.slug,id:`${s.slug}-a`,className:"peer/answer hidden h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300"}),e.jsxs("label",{className:"text-sm font-medium text-gray-900 ml-2 block w-full py-3 px-2 rounded-md border-[1px] peer-checked/answer:bg-blue-200 cursor-pointer",htmlFor:`${s.slug}-a`,children:["A. ",s.format.option_a]}),e.jsx("br",{})]}):null,s.format.option_b?e.jsxs("div",{className:"flex mb-4",children:[e.jsx("input",{onChange:r=>{g("b",s.format.answer_key,s.slug),r.target.checked},defaultChecked:s.answer?s.answer.answer=="b":!1,type:"radio",name:s.slug,id:`${s.slug}-b`,className:"peer/answer hidden h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300"}),e.jsxs("label",{className:"text-sm font-medium text-gray-900 ml-2 block w-full py-3 px-2 rounded-md border-[1px] peer-checked/answer:bg-blue-200 cursor-pointer",htmlFor:`${s.slug}-b`,children:["B. ",s.format.option_b]}),e.jsx("br",{})]}):null,s.format.option_c?e.jsxs("div",{className:"flex mb-4",children:[e.jsx("input",{onChange:r=>{g("c",s.format.answer_key,s.slug),r.target.checked},defaultChecked:s.answer?s.answer.answer=="c":!1,type:"radio",name:s.slug,id:`${s.slug}-c`,className:"peer/answer hidden h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300"}),e.jsxs("label",{className:"text-sm font-medium text-gray-900 ml-2 block w-full py-3 px-2 rounded-md border-[1px] peer-checked/answer:bg-blue-200 cursor-pointer",htmlFor:`${s.slug}-c`,children:["C. ",s.format.option_c]}),e.jsx("br",{})]}):null,s.format.option_d?e.jsxs("div",{className:"flex mb-4",children:[e.jsx("input",{onChange:r=>{g("d",s.format.answer_key,s.slug),r.target.checked},defaultChecked:s.answer?s.answer.answer=="d":!1,type:"radio",name:s.slug,id:`${s.slug}-d`,className:"peer/answer hidden h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300"}),e.jsxs("label",{className:"text-sm font-medium text-gray-900 ml-2 block w-full py-3 px-2 rounded-md border-[1px] peer-checked/answer:bg-blue-200 cursor-pointer",htmlFor:`${s.slug}-d`,children:["D. ",s.format.option_d]}),e.jsx("br",{})]}):null,s.format.option_e?e.jsxs("div",{className:"flex mb-4",children:[e.jsx("input",{onChange:r=>{g("e",s.format.answer_key,s.slug),r.target.checked},defaultChecked:s.answer?s.answer.answer=="e":!1,type:"radio",name:s.slug,id:`${s.slug}-e`,className:"peer/answer hidden h-4 w-4 border-gray-300 focus:ring-2 focus:ring-blue-300"}),e.jsxs("label",{className:"text-sm font-medium text-gray-900 ml-2 block w-full py-3 px-2 rounded-md border-[1px] peer-checked/answer:bg-blue-200 cursor-pointer",htmlFor:`${s.slug}-e`,children:["E. ",s.format.option_e]}),e.jsx("br",{})]}):null]}):e.jsx(e.Fragment,{children:e.jsx(E,{question:s,questions:t,setQuestions:c})})})]},l)):null]})}export{D as default};
